(this["webpackJsonpwear-weather"]=this["webpackJsonpwear-weather"]||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(31),o=a.n(l),c=a(4),i=a(3),s=(a(90),{scale:"f",pronoun:"he",theme:"system-theme"});function u(e,t){s[e]=t;try{localStorage.setItem("userSettingsCache",JSON.stringify(s))}catch(a){console.log("Writing to local Storage error for userSettings: ",s)}return s}function d(){return s}var m=a(32),h=a.n(m),p=a(33),f=a.n(p),g=a(34),y=a.n(g),b=window.matchMedia("(prefers-color-scheme: dark)"),E=b.matches?"dark-theme":"light-theme";var w={"light-theme":{active:!1,title:"Light",class:"light-theme",key:"light-theme",icon:n.a.createElement(h.a,null)},"dark-theme":{active:!1,title:"Dark",class:"dark-theme",key:"dark-theme",icon:n.a.createElement(f.a,null)},"system-theme":{active:!1,title:"System",class:E,key:"system-theme",icon:n.a.createElement(y.a,null)}};function v(e){return Object.keys(w).forEach((function(e){w[e].active=!1})),w[e].active=!0,u("theme",w[e].key),w}var C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function N(e){return e<6||e>19}function k(e,t){var a=new Date(e),r=a.getHours();return"c"===t?r+":"+function(e){return e<10&&(e="0"+e),e}(a.getMinutes()):0===r?"12am":r<13?r+"am":r-12+"pm"}function x(e,t){return"f"===t?Math.round(1.8*(e-273.15)+32):Math.round(e-273.15)}function S(e){return Math.round(e)}var O=Object(r.lazy)((function(){return Promise.resolve().then(a.t.bind(null,32,7))})),j=Object(r.lazy)((function(){return Promise.resolve().then(a.t.bind(null,33,7))})),W=Object(r.lazy)((function(){return a.e(19).then(a.t.bind(null,113,7))})),I=Object(r.lazy)((function(){return a.e(16).then(a.t.bind(null,114,7))})),A=Object(r.lazy)((function(){return a.e(15).then(a.t.bind(null,115,7))})),P=Object(r.lazy)((function(){return a.e(20).then(a.t.bind(null,116,7))})),D=Object(r.lazy)((function(){return a.e(22).then(a.t.bind(null,117,7))})),z=Object(r.lazy)((function(){return a.e(21).then(a.t.bind(null,118,7))})),U=Object(r.lazy)((function(){return a.e(18).then(a.t.bind(null,119,7))})),F=Object(r.lazy)((function(){return a.e(23).then(a.t.bind(null,120,7))})),T=Object(r.lazy)((function(){return a.e(17).then(a.t.bind(null,121,7))})),L=Object(r.lazy)((function(){return a.e(24).then(a.t.bind(null,122,7))})),R=Object(r.lazy)((function(){return a.e(25).then(a.t.bind(null,123,7))})),_=new Date;function H(){var e=null,t=!1,a=localStorage.getItem("weatherCache")||null;if(a){var r=JSON.parse(a),n=(new Date).getTime()-9e5;e=r.weather,r.date<n?(t=!0,console.log("oldWeather is old, marking as cached")):console.log("oldWeather is still fresh, date more recent than checkDate")}else t=null;return[e,t]}function M(e){var t={date:(new Date).getTime(),weather:e};console.log("setting weatherCache: ",t);try{localStorage.setItem("weatherCache",JSON.stringify(t))}catch(a){console.log("Writing to local Storage error for weatherCache:",a)}return e}function J(e){var t;switch(!0){case/2[0-9][0-9]/.test(e):t={ambiance:"dark",description:"thunderstorm",background:"rain",color:"darkblue",icon:n.a.createElement(U,null)};break;case/3[0-9][0-9]/.test(e):t={ambiance:"light",description:"drizzle",background:"rain",color:"blue",icon:n.a.createElement(P,null)};break;case/50[2-4]/.test(e):t={ambiance:"dark",description:"heavy rain",background:"rain",color:"darkblue",icon:n.a.createElement(z,null)};break;case/5[0-9][0-9]/.test(e):t={ambiance:"medium",description:"rain",background:"rain",color:"blue",icon:n.a.createElement(D,null)};break;case/6[0-9][0-9]/.test(e):t={ambiance:"medium",description:"snow",background:"snow",color:"gray",icon:n.a.createElement(F,null)};break;case/7[0,2,4]1/.test(e):t={ambiance:"medium",description:"fog",background:"cloud",color:"gray",icon:n.a.createElement(T,null)};break;case/711/.test(e):t={ambiance:"medium",description:"smoke",background:"cloud",color:"gray",icon:n.a.createElement(A,null)};break;case/7[3,5]1/.test(e):t={ambiance:"medium",description:"sand",background:"wind",color:"lightbrown",icon:n.a.createElement(R,null)};break;case/76[1-2]/.test(e):t={ambiance:"medium",description:"dust",background:"wind",color:"lightbrown",icon:n.a.createElement(R,null)};break;case/7[7-8]1/.test(e):t={ambiance:"light",description:"strong winds",background:"wind",color:"gray",icon:n.a.createElement(L,null)};break;case/800/.test(e):t={ambiance:"light",description:"clear",background:"clear",color:"yellow",icon:n.a.createElement(O,null),timeIcon:N(_.getHours())?n.a.createElement(j,null):n.a.createElement(O,null)};break;case/80[1-2]/.test(e):t={ambiance:"light",description:"partly cloudy",background:"clear",color:"lightgray",icon:n.a.createElement(W,null)};break;case/80[3-4]/.test(e):t={ambiance:"medium",description:"cloudy",background:"cloud",color:"gray",icon:n.a.createElement(I,null)};break;default:t={ambiance:"light",description:"clear",background:"clear",color:"yellow",icon:n.a.createElement(O,null),timeIcon:N(_.getHours())?n.a.createElement(j,null):n.a.createElement(O,null)}}return t}var B=a(14);function V(e){var t=B.currentForecastUrl+"&q=".concat(e);return fetch(t).then((function(e){if(!e.ok)throw Error("currentForecast API error");return e})).then((function(e){return e.json()})).catch((function(t){return{error:"Issue getting weather data",detailedError:"getCurrentData API fail for ".concat(e)}}))}function q(e){var t=B.hourlyForecastUrl+"&q=".concat(e);return fetch(t).then((function(e){if(!e.ok)throw Error("hourlyForecast API error");return e})).then((function(e){return e.json()})).catch((function(t){return{error:"Issue getting weather data",detailedError:"getHourlyData API fail for ".concat(e)}}))}function K(e){var t=B.extendedForecastUrl+"&q=".concat(e);return fetch(t).then((function(e){if(!e.ok)throw Error("extendedForecast API error");return e})).then((function(e){return e.json()})).catch((function(t){return{error:"Issue getting weather data",detailedError:"getExtendedData API fail for ".concat(e)}}))}function G(e){return Promise.all([V(e),q(e),K(e)])}var Q=a(35),X=a.n(Q),Y=a(36),Z=a.n(Y),$=a(37),ee=a.n($),te=a(1),ae=a.n(te),re=(a(94),a(98),a(30),a(38));a(109);ae.a.initializeApp({apiKey:"AIzaSyD8LP5CySz_KrrgaLiO3-OM-EUpYhFhXQA",authDomain:"wearweather-jxd.firebaseapp.com",databaseURL:"https://wearweather-jxd.firebaseio.com",projectId:"wearweather-jxd",storageBucket:"wearweather-jxd.appspot.com",messagingSenderId:"143283944775",appId:"1:143283944775:web:a84402617d08b0f05ee062",measurementId:"G-PBMCYQXTEG"}),ae.a.firestore(),ae.a.database();var ne=ae.a,le=new re.a.AuthUI(ae.a.auth()),oe={callbacks:{signInSuccessWithAuthResult:function(e,t){return!0},uiShown:function(){}},signInFlow:"popup",signInSuccessUrl:"localhost:3000",signInOptions:[ae.a.auth.GoogleAuthProvider.PROVIDER_ID,ae.a.auth.EmailAuthProvider.PROVIDER_ID],tosUrl:"<your-tos-url>",privacyPolicyUrl:"<your-privacy-policy-url>"},ce=Object(r.lazy)((function(){return a.e(26).then(a.t.bind(null,124,7))})),ie=function(e){console.log("SettingsBar props: ",e);var t=[{unit:"f",active:!1},{unit:"c",active:!1}];t.forEach((function(t){t.unit===e.userSettings.scale&&(t.active=!0)}));var a=[{pronoun:"he",active:!1},{pronoun:"she",active:!1},{pronoun:"they",active:!1}];a.forEach((function(t){t.pronoun===e.userSettings.pronoun&&(t.active=!0)}));var l=Object(r.useState)(!1),o=Object(i.a)(l,2),c=o[0],s=o[1],u=Object(r.useRef)(),d=Object(r.useRef)(),m=Object(r.useRef)(),h=function(e){c?document.querySelector("html").classList.remove("locked"):document.querySelector("html").classList.add("locked"),s(e)};return n.a.createElement("article",{id:"SettingsBar",className:"positionrel marginauto"},n.a.createElement("section",{id:"SettingsButtons-section",className:"displayflex"},n.a.createElement("div",{id:"Settings-refresh-icon",className:"Settings-icon displayflex positionrel MDI-container",onClick:function(){document.getElementById("Settings-refresh-icon").classList.add("spin"),setTimeout((function(){document.getElementById("Settings-refresh-icon").classList.remove("spin")}),600),e.refreshWeather()}},n.a.createElement(X.a,null)),null===e.user?n.a.createElement("div",{id:"Settings-AccountPlus-icon",className:"Settings-icon displayflex positionrel MDI-container",onClick:e.accessUserLoginClick},n.a.createElement(Z.a,null)):null,n.a.createElement("div",{id:"Settings-cog-icon",className:"Settings-icon displayflex positionrel MDI-container",onClick:function(){return h(!c)}},n.a.createElement(ee.a,null))),n.a.createElement("section",{id:"Overflow-section",className:"positionfixed"+(c?" open":"")},n.a.createElement("div",{id:"Overflow-screen",className:"positionabs",onClick:function(){return h(!1)}}),n.a.createElement("article",{id:"Overflow-popup",className:"displayflex flexcol marginauto positionrel popup popup-shadow"},n.a.createElement("h3",{className:"Overflow-row header-row displayflex positionrel"},n.a.createElement("div",{className:"Overflow-row-title displayflex"},null!==e.user?n.a.createElement("div",{className:"biggerfont biggerfont-height bold4 marginauto-height"},e.user.displayName,"'s Settings"):n.a.createElement("div",{className:"biggerfont biggerfont-height bold4 marginauto-height"},"Settings")),n.a.createElement("div",{className:"Overflow-row-icon displayflex",onClick:function(){return h(!1)}},n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(n.a.Fragment,null)},n.a.createElement(ce,null)))),n.a.createElement("div",{className:"Overflow-row displayflex positionrel"},n.a.createElement("div",{className:"Overflow-row-title displayflex"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},"Theme")),n.a.createElement("div",{className:"Overflow-row-options displayflex"},n.a.createElement("div",{className:"dropdown medfont"},n.a.createElement("input",{id:"DropdownThemes",className:"dropdown-input",type:"checkbox",ref:u}),Object.keys(e.themeObj).filter((function(t){return!0===e.themeObj[t].active})).map((function(t,a){return n.a.createElement("label",{htmlFor:"DropdownThemes",className:"dropdown-label",key:a},n.a.createElement("div",{className:"dropdown-icon"},n.a.createElement("span",{className:"theme-icon"},e.themeObj[t].icon)),n.a.createElement("div",{className:"dropdown-title"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},e.themeObj[t].title)))})),n.a.createElement("ul",{className:"dropdown-ul"},Object.keys(e.themeObj).filter((function(t){return!1===e.themeObj[t].active})).map((function(t,a){return n.a.createElement("li",{className:"dropdown-li displayflex",onClick:function(){return function(t){e.sendNewTheme(t),u.current.checked=!1}(e.themeObj[t].key)},key:a},n.a.createElement("div",{className:"dropdown-icon"},n.a.createElement("span",{className:"theme-icon"},e.themeObj[t].icon)),n.a.createElement("div",{className:"dropdown-title"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},e.themeObj[t].title)))})))))),n.a.createElement("div",{className:"Overflow-row displayflex positionrel"},n.a.createElement("div",{className:"Overflow-row-title displayflex"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},"Unit")),n.a.createElement("div",{className:"Overflow-row-options displayflex"},n.a.createElement("div",{className:"dropdown medfont"},n.a.createElement("input",{id:"DropdownUnits",className:"dropdown-input",type:"checkbox",ref:d}),t.filter((function(e){return!0===e.active})).map((function(e,t){return n.a.createElement("label",{htmlFor:"DropdownUnits",className:"dropdown-label",key:t},n.a.createElement("div",{className:"dropdown-title"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},"\xb0 "+e.unit)))})),n.a.createElement("ul",{className:"dropdown-ul"},t.filter((function(e){return!1===e.active})).map((function(t,a){return n.a.createElement("li",{className:"dropdown-li displayflex",onClick:function(){return a=t.unit,e.sendNewSetting("scale",a),void(d.current.checked=!1);var a},key:a},n.a.createElement("div",{className:"dropdown-title"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},"\xb0 "+t.unit)))})))))),null!==e.user?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"Overflow-row displayflex positionrel"},n.a.createElement("div",{className:"Overflow-row-title displayflex"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},"Pronoun")),n.a.createElement("div",{className:"Overflow-row-options displayflex"},n.a.createElement("div",{className:"dropdown medfont"},n.a.createElement("input",{id:"DropdownPronouns",className:"dropdown-input",type:"checkbox",ref:m}),a.filter((function(e){return!0===e.active})).map((function(e,t){return n.a.createElement("label",{htmlFor:"DropdownPronouns",className:"dropdown-label",key:t},n.a.createElement("div",{className:"dropdown-title"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},e.pronoun)))})),n.a.createElement("ul",{className:"dropdown-ul"},a.filter((function(e){return!1===e.active})).map((function(t,a){return n.a.createElement("li",{className:"dropdown-li displayflex",onClick:function(){return a=t.pronoun,e.sendNewSetting("pronoun",a),void(m.current.checked=!1);var a},key:a},n.a.createElement("div",{className:"dropdown-title"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},t.pronoun)))})))))),n.a.createElement("div",{className:"Overflow-bottom-row displayflex positionrel"},n.a.createElement("button",{className:"solid-button red-button smallfont",onClick:function(){setTimeout((function(){window.location.reload(!1)}),3e3),ne.auth().signOut()}},"Sign out"))):null)))},se=function(e){var t=n.a.createRef();return Object(r.useEffect)((function(){var a;a=t.current,console.log("firebaseUIStarter ",a),le.start(a,oe),ne.auth().onAuthStateChanged((function(t){t?e.userUpdate(t):console.log("no user")}))}),[]),n.a.createElement("section",{id:"UserLogin-section",className:"positionabs displayflex"},n.a.createElement("article",{id:"UserLogin-card",className:"displayflex flexcol marginauto"},n.a.createElement("section",{id:"FirebaseUI-container",className:"displayflex",ref:t}),n.a.createElement("div",{id:"UserLogin-close-container",className:"displayflex"},n.a.createElement("button",{id:"UserLogin-close",className:"outline-button red-button",onClick:e.closeClick},"Cancel"))))},ue=function(e){var t=Object(r.useState)(!1),a=Object(i.a)(t,2),l=a[0],o=a[1];return n.a.createElement("nav",{id:"App-Navbar",className:"bigfont "+e.color},n.a.createElement(ie,{user:e.user,themeObj:e.themeObj,sendNewTheme:function(t){return e.sendNewTheme(t)},accessUserLoginClick:function(){o(!0)},userSettings:e.userSettings,sendNewSetting:function(t,a){return e.sendNewSetting(t,a)},refreshWeather:e.refreshWeather}),l&&n.a.createElement(se,{user:e.user,userUpdate:function(t){return e.userUpdate(t)},closeClick:function(){o(!1)}}))},de=function(e){var t=e.allWeather,a=e.scale,r=e.currCity,l=e.weatherCodeObj,o=new Date(1e3*t.currentWeather.dt);return n.a.createElement("section",{id:"CurrentWeatherCard-section",className:"displayflex flexcol marginauto "+t.currentWeather.weather[r].main},n.a.createElement("header",{className:"card-header displayflex flexcol"},n.a.createElement("span",{className:"hugefont bold6"},C[o.getDay()]),n.a.createElement("span",{className:"biggerfont bold4"},t.name),n.a.createElement("span",{id:"CurrentWeatherCard-description",className:"biggerfont bold3"},t.currentWeather.weather[0].description)),n.a.createElement("article",{id:"CurrentWeatherCard-container",className:"displayflex"},n.a.createElement("article",{id:"CurrentWeather-circle",className:"card fluent-card card-shadow positionrel "+l.color},n.a.createElement("span",{id:"CurrentWeather-max",className:"temperature hugefont hugefont-height positionabs"},x(t.currentWeather.main.temp_max,a)),n.a.createElement("div",{className:"temperature-container displayflex bold3"},n.a.createElement("span",{className:"temperature positionrel herofont marginauto"},x(t.currentWeather.main.temp,a))),n.a.createElement("span",{id:"CurrentWeather-min",className:"temperature hugefont hugefont-height positionabs"},x(t.currentWeather.main.temp_min,a)))))},me=a(7),he=function(e){var t=Object(r.useRef)(null),a=e.data.list.slice(0,10).map((function(t){return{timeSimple:k(1e3*t.dt,e.scale),timeObj:new Date(1e3*t.dt),temperature:x(t.main.temp,e.scale),icon:J(t.weather[0].id).icon}}));return Object(r.useEffect)((function(){!function(e,t){var a=e.offsetWidth,r=e.offsetHeight,n=me.d().range([2,a-2]).domain(me.a(t,(function(e){return e.timeObj}))),l=me.c().rangeRound([r-40,50]).domain(me.a(t,(function(e){return e.temperature}))),o=me.e(e).append("svg").attr("width",a-100).attr("height",r-40),c=me.b().x((function(e){return n(e.timeObj)})).y((function(e){return l(e.temperature)}));o.append("path").datum(t).attr("fill","none").attr("stroke","orange").attr("stroke-width",1.5).attr("d",c)}(t.current,a)}),[e.weather,a]),n.a.createElement("article",{id:"HourlyWeather-card",className:"card largecard fluent-card card-shadow displayflex"},n.a.createElement("section",{id:"HourlyWeather-scroll-section",className:"displayflex flexcol"},n.a.createElement("article",{id:"HourlyWeather-cards-container",className:"displayflex positionrel"},a.map((function(e,t){return n.a.createElement("article",{className:"HourlyWeather-card displayflex flexcol",key:t},n.a.createElement("span",{className:"HourlyWeather-time medfont medfont-height text-center"},e.timeSimple),n.a.createElement("span",{className:"HourlyWeather-icon"},n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(n.a.Fragment,null)},n.a.createElement("span",{className:"biggerfont biggerfont-height weather-icon-container"},e.icon))),n.a.createElement("span",{className:"HourlyWeather-temperature medfont medfont-height text-center positionrel"},e.temperature))})),n.a.createElement("section",{id:"HourlyWeather-graphs-container",className:"displayflex flexcol positionabs"},n.a.createElement("article",{id:"HourlyWeather-temperature-graph",className:"d3-graph",ref:t})))))},pe=function(e){var t=new Date(1e3*e.data.dt);return n.a.createElement("article",{className:"ExtendedWeather-row displayflex"},n.a.createElement("div",{className:"ExtendedWeather-day displayflex"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height bold5"},C[t.getDay()])),n.a.createElement("div",{className:"ExtendedWeather-icon"},n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(n.a.Fragment,null)},n.a.createElement("span",{className:"biggerfont biggerfont-height weather-icon-container"},J(e.data.weather[e.currentCity].id).icon))),n.a.createElement("div",{className:"ExtendedWeather-description"},n.a.createElement("span",{className:"medfont medfont-height marginauto-height"},e.data.weather[0].main)),n.a.createElement("div",{className:"ExtendedWeather-temp displayflex"},n.a.createElement("span",{className:"medfont medfont-height bold5"},x(e.data.temp.max,e.scale),"\xb0"),n.a.createElement("span",{className:"medfont medfont-height"},x(e.data.temp.min,e.scale),"\xb0")))},fe=function(e){return n.a.createElement("section",{id:"WeatherDaily",className:"main-tab flexcol"},e.weather&&e.weather.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{id:"CurrentWeather-section",className:"positionrel"},e.weather.map((function(t,a){return n.a.createElement(de,{key:a,allWeather:t,scale:e.scale,currCity:e.currentCity,weatherCodeObj:e.weatherCodeObj})}))),n.a.createElement("section",{id:"HourlyWeather-section",className:"displayflex flexcol"},n.a.createElement(he,{data:e.weather[e.currentCity].hourlyWeather,scale:e.scale,currentCity:e.currentCity})),n.a.createElement("section",{id:"ExtendedWeather-section",className:"displayflex flexcol"},n.a.createElement("article",{id:"ExtendedWeather-card",className:"card largecard fluent-card card-shadow displayflex flexcol"},e.weather[e.currentCity].extendedWeather.list.map((function(t,a){return n.a.createElement(pe,{data:t,scale:e.scale,currentCity:e.currentCity,key:a})}))))):null)},ge=Object(r.lazy)((function(){return a.e(3).then(a.bind(null,125))})),ye=Object(r.lazy)((function(){return a.e(4).then(a.bind(null,126))})),be=Object(r.lazy)((function(){return a.e(5).then(a.bind(null,127))})),Ee=Object(r.lazy)((function(){return a.e(6).then(a.bind(null,128))})),we=Object(r.lazy)((function(){return a.e(8).then(a.bind(null,129))})),ve=Object(r.lazy)((function(){return a.e(7).then(a.bind(null,130))})),Ce=Object(r.lazy)((function(){return a.e(9).then(a.bind(null,131))})),Ne=Object(r.lazy)((function(){return a.e(10).then(a.bind(null,132))})),ke=Object(r.lazy)((function(){return a.e(11).then(a.bind(null,133))})),xe=Object(r.lazy)((function(){return a.e(13).then(a.bind(null,134))})),Se=Object(r.lazy)((function(){return a.e(12).then(a.bind(null,135))}));function Oe(e,t,a,r){return"dress"===e?n.a.createElement(ge,{primaryColor:t,secondaryColor:a}):"dressShirt"===e?n.a.createElement(ye,{primaryColor:t,secondaryColor:a}):"jeans"===e?n.a.createElement(be,{primaryColor:t}):"longSocks"===e?n.a.createElement(Ee,{primaryColor:t,secondaryColor:a,tertiaryColor:r}):"shorts"===e?n.a.createElement(we,{primaryColor:t}):"shortShorts"===e?n.a.createElement(ve,{primaryColor:t,secondaryColor:a}):"skirt"===e?n.a.createElement(Ce,{primaryColor:t}):"sunglasses"===e?n.a.createElement(Ne,{primaryColor:t,secondaryColor:a}):"sweater"===e?n.a.createElement(ke,{primaryColor:t}):"tights"===e?n.a.createElement(xe,{primaryColor:t}):"tShirt"===e?n.a.createElement(Se,{primaryColor:t}):void 0}var je=function(e){var t=Object(r.useRef)(),a=Object(r.useRef)(),l=Object(r.useRef)(),o=function(e){return e.replace(/[^\d,]/g,"").split(",")},s=function(t,a){var r=Object(c.a)({},e.data);switch(t){case"addrem":r.selected=!r.selected,e.editCloth(r,"addrem");break;case"colorChange":console.log("colorChange ",a),e.editCloth(a,"colorChange");break;default:console.log("No clothingChangeSend for ",t)}},u=function(e,t){var a;return function(){for(var r=this,n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];var c=function(){return a=null,e.apply(r,l)};clearTimeout(a),a=setTimeout(c,t)}}((function(t,a,r){var n=Object(c.a)({},e.data),l=0===f.activeColorSwap?"primaryColor":1===f.activeColorSwap?"secondaryColor":"tertiaryColor",i=o(n[l]);i[r]=t;var u="rgb("+i.toString()+")";n[l]=u;var d=Oe(n.title,n.primaryColor,n.secondaryColor,n.tertiaryColor);s("colorChange",n),g({type:"colorChange",rgbLabel:a,newVal:t,activeColorLabel:l,newSvgIcon:d})}),250),d=function(e,t,a,r,n,l,c){var i=o(e),s=Oe(t,a,r,n);return{cardActive:l,activeColorSwap:c,red:i[0],green:i[1],blue:i[2],svgIcon:s}},m=d(e.data.primaryColor,e.data.title,e.data.primaryColor,e.data.secondaryColor,e.data.tertiaryColor,!1,0),h=Object(r.useReducer)((function(r,n){var i=Object(c.a)({},r);switch(n.type){case"colorPickerToggle":return i.cardActive=!i.cardActive,i;case"colorPickerSwap":if(n.index!==i.activeColorSwap){i.activeColorSwap=n.index;var s=0===n.index?e.data.primaryColor:1===n.index?e.data.secondaryColor:e.data.tertiaryColor,u=o(s);i.red=u[0],i.green=u[1],i.blue=u[2],t.current.value=u[0],a.current.value=u[1],l.current.value=u[2]}return i;case"colorChange":i[n.rgbLabel]=n.newVal,i.svgIcon=n.newSvgIcon;var d=e.data[n.activeColorLabel],m=o(d);return i.red=m[0],i.green=m[1],i.blue=m[2],t.current.value=m[0],a.current.value=m[1],l.current.value=m[2],i;case"newStateFromProps":return n.newState;default:return r}}),m),p=Object(i.a)(h,2),f=p[0],g=p[1];return Object(r.useEffect)((function(){var t=0===f.activeColorSwap?e.data.primaryColor:1===f.activeColorSwap?e.data.secondaryColor:e.data.tertiaryColor,a=d(t,e.data.title,e.data.primaryColor,e.data.secondaryColor,e.data.tertiaryColor,f.cardActive,f.activeColorSwap);g({type:"newStateFromProps",newState:a})}),[e.data,f.activeColorSwap,f.cardActive]),n.a.createElement("article",{className:"card fluent-card card-shadow displayflex nonselect positionrel "+(f.cardActive?"active":"")},n.a.createElement("section",{className:"card-contents displayflex flexcol positionabs"},n.a.createElement("span",{className:"card-icon-container displayflex"},n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(n.a.Fragment,null)},f.svgIcon)),n.a.createElement("header",{className:"card-name-container medfont medfont-height"},n.a.createElement("p",{className:"card-name marginauto-height"},e.data.name)),n.a.createElement("div",{className:"card-buttons-container displayflex positionrel"},n.a.createElement("button",{className:"outline-button "+("Add"===e.addrem?"green-button":"red-button"),onClick:function(){return s("addrem",null)}},e.addrem),n.a.createElement("button",{className:"card-color-picker-button outline-button",onClick:function(){return g({type:"colorPickerToggle"})}},"Color"))),n.a.createElement("section",{className:"card-color-picker-container displayflex flexcol positionabs"},n.a.createElement("span",{className:"card-color-picker-close positionabs pointer nonselect",onClick:function(){return g({type:"colorPickerToggle"})}},"close"),n.a.createElement("article",{className:"card-color-picker-swapper displayflex"},n.a.createElement("span",{className:"card-color-picker-option primary marginauto"+(0===f.activeColorSwap?" active":""),onClick:function(){return g({type:"colorPickerSwap",index:0})}},n.a.createElement("span",{style:{backgroundColor:e.data.primaryColor}})),null!==e.data.secondaryColor&&n.a.createElement("span",{className:"card-color-picker-option secondary marginauto"+(1===f.activeColorSwap?" active":""),onClick:function(){return g({type:"colorPickerSwap",index:1})}},n.a.createElement("span",{style:{backgroundColor:e.data.secondaryColor}})),null!==e.data.tertiaryColor&&n.a.createElement("span",{className:"card-color-picker-option tertiary marginauto"+(2===f.activeColorSwap?" active":""),onClick:function(){return g({type:"colorPickerSwap",index:2})}},n.a.createElement("span",{style:{backgroundColor:e.data.tertiaryColor}}))),n.a.createElement("article",{className:"card-color-picker-sliders-container displayflex flexcol"},n.a.createElement("div",{className:"card-color-picker-slider displayflex"},n.a.createElement("span",{className:"smallfont smallfont-height marginauto-height"},f.red),n.a.createElement("input",{className:"slider marginauto-height",type:"range",min:"0",max:"255",step:"1",defaultValue:f.red,onChange:function(e){return u(e.target.value,"red",0)},ref:t})),n.a.createElement("div",{className:"card-color-picker-slider displayflex"},n.a.createElement("span",{className:"smallfont smallfont-height marginauto-height"},f.green),n.a.createElement("input",{className:"slider marginauto-height",type:"range",min:"0",max:"255",step:"1",defaultValue:f.green,onChange:function(e){return u(e.target.value,"green",1)},ref:a})),n.a.createElement("div",{className:"card-color-picker-slider displayflex"},n.a.createElement("span",{className:"smallfont smallfont-height marginauto-height"},f.blue),n.a.createElement("input",{className:"slider marginauto-height",type:"range",min:"0",max:"255",step:"1",defaultValue:f.blue,onChange:function(e){return u(e.target.value,"blue",2)},ref:l})))))},We=function(e){for(var t=Object.keys(e.clothing),a=t.length,r=[],l=[],o=0;o<a;o++)l[t[o]]=[];for(var c=0;c<a;c++)for(var i=t[c],s=e.clothing[t[c]],u=Object.keys(s),d=u.length,m=0;m<d;m++)!0===s[u[m]].selected?r.push(s[u[m]]):l[i].push(s[u[m]]);var h=function(t,a){console.log("newClothing: ",t),e.editClothing([t])};return n.a.createElement("section",{id:"WearPicker",className:"main-tab displayflex flexcol"},n.a.createElement("section",{id:"AllWear-section"},n.a.createElement("h3",{className:"Wear-header biggerfont bold4"},"Pick your outfit"),n.a.createElement("article",{id:"AllWear-container",className:"displayflex flexcol"},t.map((function(e,t){return l[e].length>0?n.a.createElement("section",{id:e+"-section",key:t},n.a.createElement("h4",{className:"bigfont bold4"},e),n.a.createElement("section",{id:e+"-container",className:"displayflex horz-scroll"},l[e].map((function(e,t){return n.a.createElement(je,{key:t,data:e,addrem:"Add",editCloth:function(e,t){return h(e)}})})))):null})))),n.a.createElement("section",{id:"PickedWear-section"},n.a.createElement("h3",{className:"Wear-header biggerfont bold4"},"Today's Outfit"),r.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{id:"PickedWear-container",className:"displayflex horz-scroll"},r.map((function(e,t){return n.a.createElement(je,{key:t,data:e,editCloth:function(e,t){return h(e)},addrem:"Remove"})}))),n.a.createElement("article",{id:"PickedWear-submit-container",className:"Wear-submit-container displayflex positionrel"},n.a.createElement("button",{className:"solid-button large teal-button smallfont",onClick:function(){var t=(new Date).getTime()+"_"+S(e.weather[e.currentCity].currentWeather.main.temp);console.log("key: ",t);var a={temperature:e.weather[e.currentCity].currentWeather.main.temp,weatherId:e.weather[e.currentCity].currentWeather.weather[0].id,clothing:r};console.log("submittedClothing ",a)}},"Submit"))):n.a.createElement("article",{id:"NoSelectedCards",className:"displayflex flexcol nonselect"},n.a.createElement("p",{className:"marginauto medfont"},"No Clothes Selected"))))},Ie=function(e){var t=Oe(e.data.title,e.data.primaryColor,e.data.secondaryColor,e.data.tertiaryColor);return n.a.createElement("article",{className:"card fluent-card card-shadow displayflex nonselect positionrel"},n.a.createElement("section",{className:"card-contents displayflex flexcol positionabs"},n.a.createElement("span",{className:"card-icon-container displayflex"},n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(n.a.Fragment,null)},t)),n.a.createElement("header",{className:"card-name-container medfont medfont-height"},n.a.createElement("p",{className:"card-name marginauto-height"},e.data.name)),n.a.createElement("div",{className:"card-buttons-container displayflex positionrel"},n.a.createElement("button",{className:"outline-button "+("Add"===e.addrem?"green-button":"red-button"),onClick:function(){e.editCloth(e.data)}},e.addrem))))},Ae=[{clothing:[{category:"tops",pronoun:"all",name:"t-shirt",primaryColor:"rgb(193, 163, 177)",selected:!0,title:"tShirt"},{category:"bottoms",pronoun:"he",name:"shorts",primaryColor:"rgb(43, 72, 109)",selected:!0,title:"shorts"}],temperature:298.37,weatherId:800}];var Pe=function(e,t){var a=S(t+8),r=S(t-8);console.log(t,a,r);for(var n=Object.keys(e),l=n.length,o=[],c=0;c<l;c++){var i=n[c].split("_")[1];console.log(i),i<=a&&r<=i&&o.push(e[n[c]])}console.log("filteredData: ",o),Ae=o};function De(){var e=Ae.length;if(0===e)return[];var t=Math.floor(Math.random()*e);return Ae[t].clothing}var ze=function(e){var t=Object(r.useState)(null),a=Object(i.a)(t,2),l=a[0],o=a[1];Object(r.useEffect)((function(){c()}),[e.db,e.userSettings.userObject]);var c=function(){var t,a;(t=e.db,a=e.weather[e.currentCity].currentWeather.main.temp,e.userSettings.userObject,Ae.length>0?new Promise((function(e){e(De())})):new Promise((function(e){t.once("value").then((function(t){var r=t.val()&&t.val().data||[];console.log("ClothesAPI data: ",r),Pe(r,a),e(De())}))}))).then((function(e){o(e)}))};return n.a.createElement("section",{id:"WearSuggester",className:"displayflex flexcol"},n.a.createElement("h3",{className:"Wear-header biggerfont bold4"},"Suggested for you"),null===l?n.a.createElement("section",{id:"SuggestedClothes-container",className:"displayflex three-card-row horz-scroll"},n.a.createElement("div",{className:"loadingcard displayflex"},n.a.createElement("p",{className:"marginauto medfont"},"loading"))):l.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("section",{id:"SuggestedClothes-container",className:"displayflex three-card-row horz-scroll"},l.map((function(t,a){return n.a.createElement(Ie,{data:t,key:a,editCloth:function(t){return function(t,a){console.log("Edit suggested clothing: ",t,a),t.selected=!0,e.editClothing([t])}(t,a)},addrem:"Add"})}))),n.a.createElement("article",{className:"Wear-submit-container displayflex positionrel"},n.a.createElement("button",{className:"solid-button large smallfont",onClick:function(){var e=De();console.log(e)}},"Suggest New Clothes"))):n.a.createElement("article",{id:"NoSuggestedClothes",className:"displayflex flexcol nonselect"},n.a.createElement("p",{className:"marginauto-height medfont"},"No Suggested Clothes Available")))},Ue=a(5),Fe=function(e){for(var t=Object.keys(Ue),a=t.length,l=0;l<a;l++)for(var o=Object.keys(Ue[t[l]]),c=o.length,s=0;s<c;s++)"he"===e.userSettings.pronoun?"she"===Ue[t[l]][o[s]].pronoun&&delete Ue[t[l]][o[s]]:"she"===e.userSettings.pronoun&&"he"===Ue[t[l]][o[s]].pronoun&&delete Ue[t[l]][o[s]];var u=Object(r.useState)(Ue),d=Object(i.a)(u,2),m=d[0],h=d[1],p=function(e){for(var t=JSON.parse(JSON.stringify(m)),a=0;a<e.length;a++)t[e[a].category][e[a].title]=e[a];h(t)};return n.a.createElement("section",{id:"WearSection",className:"main-tab displayflex flexcol"},n.a.createElement(ze,{weather:e.weather,currentCity:e.currentCity,editClothing:function(e){return p(e)},db:e.db,user:e.user,userSettings:e.userSettings}),n.a.createElement(We,{weather:e.weather,currentCity:e.currentCity,clothing:m,editClothing:function(e){return p(e)}}))},Te=function(e){var t=Object(r.useRef)();return n.a.createElement("article",{id:"CitySelector",className:"card fluent-card card-shadow displayflex flexcol marginauto"},n.a.createElement("header",{className:"card-header card-row"},n.a.createElement("span",{className:"biggerfont"},"Select a City")),n.a.createElement("form",{onSubmit:function(a){var r=t.current.value;console.log("_cityCheck for ",r);var n=!1;if(null!==e.weather&&e.weather.length>0)for(var l=0;l<e.weather.length;l++)r.localCompare(e.weather[l].name)>0&&(n=!0,console.log("city "+r+" matched with weather name "+e.weather[l].name));!1===n?G(r).then((function(a){var r=Object(i.a)(a,3),n=r[0],l=r[1],o=r[2];if(console.log("CitySelector data: ",[n,l,o]),n.error||l.error||o.error)alert("Weather data error"),t.current.value="";else{var c={index:0,name:n.name,id:n.id,currentWeather:n,hourlyWeather:l,extendedWeather:o};console.log("newcity: ",c),e.cityPick(c)}})):(alert("City already added, select a new city"),t.current.value=""),a.preventDefault()},action:""},n.a.createElement("section",{className:"card-row displayflex flexcol"},n.a.createElement("input",{id:"CityInput",className:"outline-input biggerfont-height",type:"text",name:"zip",ref:t})),n.a.createElement("section",{className:"card-row displayflex"},n.a.createElement("input",{style:{margin:"1rem 0 0 auto"},className:"outline-button green-button nonselect",type:"submit",value:"Submit"}))))},Le=Object(r.lazy)((function(){return a.e(14).then(a.t.bind(null,112,7))})),Re=function(e){console.log("beginning of App");var t=function(e){var t=JSON.parse(localStorage.getItem("userSettingsCache"))||d();return t.userObject=e,s=t,t}(e.user),a=H(),l=null!==a[0]&&null!==a[0][0]?J(a[0][0].currentWeather.weather[0].id):J(800),o={user:e.user,userSettings:t,themeObj:v(t.theme),currentCity:0,weather:a[0],weatherCached:a[1],weatherLoading:!1!==a[1],weatherCodeObj:l},m=Object(r.useState)(o),h=Object(i.a)(m,2),p=h[0],f=h[1];Object(r.useEffect)((function(){y()}),[]);var g=function(e){console.log("_setNewCity current weather: ",p.weather),console.log("new weather for city: ",e);var t,a,r=(t=p.weather,a=e,null===t&&(t=[]),t.push(a),M(t)),n=null!==r&&null!==r[0]?J(r[0].currentWeather.weather[0].id):J(800),l=Object(c.a)({},p);l.weatherLoading=!1,l.weatherCached=!1,l.weather=r,l.weatherCodeObj=n,f(l)},y=function(){var e=H();console.log("Check if weatherCached is old: ",e[1]),!0===e[1]&&(b(),console.log("updated weather from useEffect"))},b=function(){var e=null===p.weather?a[0]:p.weather.slice(),t=e[p.currentCity].name;console.log("App updating Weather for city: ",t),G(t).then((function(t){var r=Object(i.a)(t,3),n=r[0],l=r[1],o=r[2];if(console.log("_updateWeather data: ",[n,l,o]),n.error||l.error||o.error){console.log("Weather data error"),console.log("Setting weather from cache: ",a[0][p.currentCity]);var s=J(a[0][p.currentCity].currentWeather.weather[0].id),u=Object(c.a)({},p);u.weatherLoading=!1,u.weather=a[0],u.weatherCodeObj=s,f(u)}else{var d={index:p.currentCity,name:n.name,id:n.id,currentWeather:n,hourlyWeather:l,extendedWeather:o};console.log("newWeather: ",d);var m=J(n.weather[0].id);e[p.currentCity]=d,M(e);var h=Object(c.a)({},p);h.weatherCached=!1,h.weatherLoading=!1,h.weather=e,h.weatherCodeObj=m,console.log("new state: ",h),f(h)}}))};return console.log("render appState: ",p),n.a.createElement("div",{id:"App",className:"displayflex positionrel "+(null===p.user?"nouser ":"")+p.themeObj[p.userSettings.theme].class},null!==p.weatherCached?n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{id:"App-main",className:"displayflex marginauto positionrel"+(null===p.weather?" full":"")+" "+p.weatherCodeObj.ambiance+" "+p.weatherCodeObj.background},n.a.createElement("article",{id:"App-main-inner",className:"displayflex flexcol"},!1===p.weatherLoading?n.a.createElement(n.a.Fragment,null,n.a.createElement(fe,{weather:p.weather,currWeatherUpdate:function(){return b()},scale:p.userSettings.scale,currentCity:p.currentCity,weatherCodeObj:p.weatherCodeObj}),null!==p.user&&null!==p.weather?n.a.createElement(Fe,{weather:p.weather,scale:p.userSettings.scale,currentCity:p.currentCity,userSettings:p.userSettings,user:p.user,db:e.db}):n.a.createElement("section",{id:"WearInformer-section"},n.a.createElement("article",{class:"card largecard fluent-card card-shadow displayflex"},n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(n.a.Fragment,null)},n.a.createElement(Le,null)),n.a.createElement("p",{className:"medfont marginauto-height nonselect"},"Sign in below to start planning your next outfit")))):n.a.createElement("span",null,"loading"),n.a.createElement("article",{id:"Credits-section",className:"displayflex"},n.a.createElement("p",{id:"credits",className:"smallfont color3","aria-hidden":"true"},"Designed by ",n.a.createElement("a",{href:"https://amandainnis.github.io/",target:"_blank",rel:"noopener noreferrer"},"Amanda Innis")))),n.a.createElement("section",{id:"App-main-blur-background",className:"positionfixed"}),n.a.createElement("section",{id:"App-main-weather-background",className:"positionfixed"},n.a.createElement("article",{id:"rain-container",className:"App-main-weather-container"},n.a.createElement("span",{className:"raindrop-container one"},n.a.createElement("span",{className:"raindrop weather-drop"})),n.a.createElement("span",{className:"raindrop-container two"},n.a.createElement("span",{className:"raindrop weather-drop"})),n.a.createElement("span",{className:"raindrop-container three"},n.a.createElement("span",{className:"raindrop weather-drop"})),n.a.createElement("span",{className:"raindrop-container four"},n.a.createElement("span",{className:"raindrop weather-drop"})),n.a.createElement("span",{className:"raindrop-container five"},n.a.createElement("span",{className:"raindrop weather-drop"})),n.a.createElement("span",{className:"raindrop-container six"},n.a.createElement("span",{className:"raindrop weather-drop"})),n.a.createElement("span",{className:"raindrop-container seven"},n.a.createElement("span",{className:"raindrop weather-drop"}))))),n.a.createElement(ue,{user:p.user,themeObj:p.themeObj,sendNewTheme:function(e){return function(e){console.log("setNewTheme: ",e);var t=v(e),a=d(),r=Object(c.a)({},p);r.userSettings=Object(c.a)({},a),r.themeObj=Object(c.a)({},t),f(r)}(e)},userUpdate:function(e){return function(e){console.log("newUser: ",e);var t=Object(c.a)({},p);return t.user=e,f(t),window.location.reload(),!1}(e)},color:p.weatherCodeObj.color,userSettings:p.userSettings,sendNewSetting:function(e,t){return function(e,t){var a=Object(c.a)({},p),r=u(e,t);a.userSettings=r,f(a),"pronoun"===e&&window.location.reload(!1)}(e,t)},refreshWeather:y})):n.a.createElement("main",{id:"App-main",className:"full displayflex positionrel"},n.a.createElement("article",{id:"App-main-inner",className:"displayflex flexcol marginauto"},n.a.createElement(Te,{weather:p.weather,cityPick:function(e){return g(e)}}))))};a(110);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/WearWeather",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}));var _e=null,He=null;ne.auth().onAuthStateChanged((function(e){e?(_e=e,He=ne.database().ref("/users/".concat(_e.uid))):console.log("no userCheck found");var t="geolocation"in navigator;o.a.render(n.a.createElement(Re,{user:_e,db:He,gpsAvailable:t}),document.getElementById("root"))}))},14:function(e){e.exports=JSON.parse('{"dailyWeatherUrl":"","currentForecastUrl":"https://api.openweathermap.org/data/2.5/weather?appid=772386264530ffc4d6ea00e44ac3f7a4","hourlyForecastUrl":"https://api.openweathermap.org/data/2.5/forecast?appid=772386264530ffc4d6ea00e44ac3f7a4","extendedForecastUrl":"https://api.openweathermap.org/data/2.5/forecast/daily?appid=772386264530ffc4d6ea00e44ac3f7a4"}')},5:function(e){e.exports=JSON.parse('{"headwear":{"sunglasses":{"name":"sunglasses","title":"sunglasses","category":"headwear","pronoun":"all","primaryColor":"rgb(142, 104, 86)","secondaryColor":"rgb(203, 193, 141)","tertiaryColor":null,"selected":false}},"tops":{"tShirt":{"name":"t-shirt","title":"tShirt","category":"tops","pronoun":"all","primaryColor":"rgb(193, 163, 177)","secondaryColor":null,"tertiaryColor":null,"selected":false},"dressShirt":{"name":"dress shirt","title":"dressShirt","category":"tops","pronoun":"he","primaryColor":"rgb(117, 146, 200)","secondaryColor":"rgb(181, 161, 144)","tertiaryColor":null,"selected":false},"dress":{"name":"dress","title":"dress","category":"tops","pronoun":"she","primaryColor":"rgb(212, 184, 184)","secondaryColor":null,"tertiaryColor":null,"selected":false},"sweater":{"name":"sweater","title":"sweater","category":"tops","pronoun":"all","primaryColor":"rgb(103, 129, 103)","secondaryColor":null,"tertiaryColor":null,"selected":false}},"bottoms":{"jeans":{"name":"jeans","title":"jeans","category":"bottoms","pronoun":"all","primaryColor":"rgb(111, 171, 191)","secondaryColor":null,"tertiaryColor":null,"selected":false},"shorts":{"name":"shorts","title":"shorts","category":"bottoms","pronoun":"he","primaryColor":"rgb(43, 72, 109)","secondaryColor":null,"tertiaryColor":null,"selected":false},"shortShorts":{"name":"shorts","title":"shortShorts","category":"bottoms","pronoun":"she","primaryColor":"rgb(75, 103, 140)","secondaryColor":"rgb(201, 181, 102)","tertiaryColor":null,"selected":false},"skirt":{"name":"skirt","title":"skirt","category":"bottoms","pronoun":"she","primaryColor":"rgb(156, 162, 164)","secondaryColor":null,"tertiaryColor":null,"selected":false}},"tights":{"tights":{"name":"tights","title":"tights","category":"tights","pronoun":"she","primaryColor":"rgb(20, 20, 20)","secondaryColor":null,"tertiaryColor":null,"selected":false}},"socks":{"longSocks":{"name":"long socks","title":"longSocks","category":"socks","pronoun":"all","primaryColor":"rgb(170, 86, 86)","secondaryColor":"rgb(204, 183, 71)","tertiaryColor":"rgb(90, 113, 98)","selected":false}}}')},85:function(e,t,a){e.exports=a(111)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.31548018.chunk.js.map